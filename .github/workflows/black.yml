name: Lint

on: [push, pull_request]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: psf/black@stable
      entrypoint="import sys;
      import subprocess;
      from pathlib import Path;
      MAIN_SCRIPT = Path(r'${GITHUB_ACTION_PATH}') / 'action' / 'main.py';
      proc = subprocess.run([sys.executable, str(MAIN_SCRIPT)]);
      sys.exit(proc.returncode)
      "

      if [ "$RUNNER_OS" == "Windows" ]; then
        echo $entrypoint | python
      else
        echo $entrypoint | python3
      fi
      shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}
      env:
        INPUT_OPTIONS: --check --diff
        INPUT_SRC: .
        INPUT_BLACK_ARGS: 
        INPUT_VERSION: 
        pythonioencoding: utf-8
