name: Lint

on: [push, pull_request]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
       - run: |
          entrypoint="import sys;
          import subprocess;
          from pathlib import Path;
          MAIN_SCRIPT = Path(r'${GITHUB_ACTION_PATH}') / 'action' / 'main.py';
          proc = subprocess.run([sys.executable, str(MAIN_SCRIPT)]);
          sys.exit(proc.returncode)
          "
          if [ "$RUNNER_OS" == "Windows" ]; then
            echo $entrypoint | python
          else
            echo $entrypoint | python3
          fi
          env:
            # TODO: Remove once https://github.com/actions/runner/issues/665 is fixed.
            INPUT_OPTIONS: 
            INPUT_SRC: 
            INPUT_BLACK_ARGS: 
            INPUT_VERSION: 
            pythonioencoding: utf-8
          shell: bash
